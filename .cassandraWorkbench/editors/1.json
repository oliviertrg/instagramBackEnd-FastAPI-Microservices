{"id":"YQtyiw8dKFGVJBAe","clusterName":"Cluster comment","keyspace":null,"body":"CREATE KEYSPACE posts\n  WITH REPLICATION = { \n   'class' : 'SimpleStrategy', \n   'replication_factor' : 2 \n  };\n \nCREATE KEYSPACE post_likes\n  WITH REPLICATION = { \n   'class' : 'SimpleStrategy', \n   'replication_factor' : 2 \n  };\n  \n \n CREATE KEYSPACE follower\n  WITH REPLICATION = { \n   'class' : 'SimpleStrategy', \n   'replication_factor' : 1 \n  };\n \nSELECT * FROM system_schema.keyspaces;\n\n\nCREATE TABLE followers.followers (\n  id UUID ,\n  user_id TEXT,\n  following_id TEXT,\n  create_at TIMESTAMP,\n  PRIMARY KEY (id)\n);\n\n\n\nCREATE TABLE follower.followers (\n  id UUID ,\n  user_id TEXT,\n  following_id TEXT,\n  create_at TIMESTAMP,\n  PRIMARY KEY (id)\n);\nCREATE INDEX followed ON followers.followers (following_id);\n\nCREATE INDEX followings ON followers.followers (user_id);\n  \n\nDESCRIBE  Cluster;\n \nCREATE TABLE comment.photo_comments (\n    id UUID  PRIMARY KEY,\n    post_id TEXT ,\n    user_id TEXT,\n    comment TEXT,\n    author TEXT,\n    create_at TIMESTAMP,\n    thread_id UUID\n);\ncreate_at\n\nCREATE TABLE post_likes.likes (\n    post_id TEXT,\n    user_id TEXT,\n    liked_at timestamp,\n    PRIMARY KEY (post_id, user_id)\n);\n\nDROP TABLE comment.photos_comments;\n\nINSERT INTO comment.photo_comments (id,post_id,user_id,comment,author,thread_id)\nVALUES (35ac7066-16bf-4b86-bc4f-bfb694eb66e3,'123','alice', 'This is a bad photo!',\n'ali',35ac7066-16bf-4b86-bc4f-bfb694eb66e3)  ;\n;\n\nSELECT * from comment.photo_comments  ;\n\nSELECT * from comment.photo_comments WHERE author = '2' ;\n\nSELECT * from comment.photo_comments \nWHERE id = 35ac7066-16bf-4b86-bc4f-bfb694eb66e3;\n\nSELECT * from comment.photo_comments \nWHERE post_id  = '123';\nCREATE INDEX post_id_index ON comment.photo_comments (post_id);\n\nCREATE INDEX author_index ON comment.photo_comments (author);\n\nSELECT * from comment.photo_comments WHERE id = 1532c5d1-ebb1-4082-8617-fa254601c4f2 ;\n\nDELETE FROM comment.photo_comments\nWHERE id = c41e69bb-073a-4e26-b6d3-c04961bf34b7 and author = '2' ;\n\nSELECT * from comment.photo_comments WHERE id = c41e69bb-073a-4e26-b6d3-c04961bf34b7 ;\n--SELECT comment from comment.photo_comments ALLOW FILTERING\n--WHERE thread_id = f6a82c53-6aa8-4fde-a552-590487fe3742;\n\nCREATE TRIGGER users_insert_trigger AFTER INSERT \nON comment.photo_comments FOR EACH ROW (\n  INSERT INTO comment.photo_comments (user_id,comment) VALUES (NEW.id, NEW);\n);\n","modified":true,"filename":"script_3.cql","source":"action"}